syntax = "proto3";

package block;
option go_package = "block";

message Block {
  string id = 1;
  string name = 2;
  string version = 3;
  oneof type {
    REST rest = 4;
    GRPC grpc = 5;
    Collection collection = 6;
    Entity entity = 7;
    Input input = 8;
  }
  string resource_id = 9;
}

message Input {
  repeated FieldDefinition fields = 4;
}

message Entity {
  string collection = 1;
}

message Collection {
  string name = 1;
}

message Result {
  bytes data = 1;
}

enum FieldType {
  STRING = 0;
  INTEGER = 1;
  BOOLEAN = 2;
}

message FieldDefinition {
  string name = 1;
  FieldType  type = 2;
}

message REST {
  string url = 1;
  string method = 2;
  map<string, string> headers = 3;
}

message GRPC {
  string host = 1;
  string service = 2;
  string method = 3;
}
